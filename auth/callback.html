<!DOCTYPE html>
<html>
<head>
    <title>Authentication Callback</title>
    <script>
        const searchParams = new URLSearchParams(window.location.search);
        const hashParams = new URLSearchParams(window.location.hash.substring(1));
      
        const type = hashParams.get('type');
        const accessToken = hashParams.get('access_token');
      
        if (type === 'recovery' && accessToken) {
          const intentUrl = `intent://reset-password/#Intent;scheme=com.profilecode.profilecode;package=com.profilecode.profilecode;end`;
          window.location.href = intentUrl;
          setTimeout(() => {
            window.location.href = 'https://play.google.com/store/apps/details?id=com.profilecode.profilecode';
          }, 2000);
        } else if (searchParams.get('error_code')) {
          document.body.innerHTML = `<h1>Error</h1><p>${searchParams.get('error_description')}</p>`;
        } else {
          document.body.innerHTML = `<h1>Error</h1><p>Invalid or missing tokens.</p>`;
        }
      </script>
      
</head>
<body>
    <h1>Redirecting to app...</h1>
    <p>If you are not redirected automatically, <a href="intent://reset-password/#Intent;scheme=com.profilecode.profilecode;package=com.profilecode.profilecode;S.browser_fallback_url=https://play.google.com/store/apps/details?id=com.profilecode.profilecode;end">click here</a> to open the app.</p>
</body>
</html> 
